{"ast":null,"code":"import { createStore } from \"redux\";\nimport jwtDecode from \"jwt-decode\";\nexport class AuthState {\n  constructor() {\n    this.token = null;\n    this.user = null;\n    this.token = localStorage.getItem(\"token\");\n    if (this.token) {\n      const jwtPayload = jwtDecode(this.token);\n      this.user = jwtPayload.user;\n    }\n  }\n}\nexport let AuthActionType = /*#__PURE__*/function (AuthActionType) {\n  AuthActionType[\"Register\"] = \"Register\";\n  AuthActionType[\"Login\"] = \"Login\";\n  AuthActionType[\"Logout\"] = \"Logout\";\n  AuthActionType[\"Update\"] = \"Update\";\n  return AuthActionType;\n}({});\nexport function authReducer(currentState = new AuthState(), action) {\n  const newState = {\n    ...currentState\n  };\n  switch (action.type) {\n    case AuthActionType.Register:\n    case AuthActionType.Login:\n      newState.token = action.payload;\n      const jwtPayload = jwtDecode(newState.token);\n      newState.user = jwtPayload.user;\n      localStorage.setItem(\"token\", newState.token);\n      break;\n    case AuthActionType.Logout:\n      newState.token = null;\n      newState.user = null;\n      localStorage.removeItem(\"token\");\n      break;\n    case AuthActionType.Update:\n      newState.user = action.payload;\n      break;\n  }\n  return newState;\n}\nexport const authStore = createStore(authReducer);","map":{"version":3,"names":["createStore","jwtDecode","AuthState","constructor","token","user","localStorage","getItem","jwtPayload","AuthActionType","authReducer","currentState","action","newState","type","Register","Login","payload","setItem","Logout","removeItem","Update","authStore"],"sources":["C:/Users/alexe/OneDrive/Desktop/Fullstack course/html example/new folder/exercise in class/18.03.24/Non Secured System/Frontend/src/Redux/AuthState.ts"],"sourcesContent":["import { createStore } from \"redux\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport UserModel from \"../Models/UserModel\";\r\n\r\nexport class AuthState {\r\n\r\n    public token: string = null;\r\n    public user: UserModel = null;\r\n    \r\n    public constructor() {\r\n        this.token = localStorage.getItem(\"token\");\r\n        if(this.token) {\r\n            const jwtPayload = jwtDecode(this.token);\r\n            this.user = (jwtPayload as any).user;\r\n        }\r\n    }\r\n}\r\n\r\nexport enum AuthActionType {\r\n    Register = \"Register\",\r\n    Login = \"Login\",\r\n    Logout = \"Logout\",\r\n    Update = \"Update\"\r\n}\r\n\r\nexport interface AuthAction {\r\n    type: AuthActionType;\r\n    payload?: any;\r\n}\r\n\r\nexport function authReducer(currentState = new AuthState(), action: AuthAction): AuthState {\r\n\r\n    const newState = { ...currentState };\r\n\r\n    switch (action.type) {\r\n\r\n        case AuthActionType.Register:\r\n        case AuthActionType.Login:\r\n            newState.token = action.payload;\r\n            const jwtPayload = jwtDecode(newState.token);\r\n            newState.user = (jwtPayload as any).user;\r\n            localStorage.setItem(\"token\", newState.token);\r\n            break;\r\n\r\n        case AuthActionType.Logout:\r\n            newState.token = null;\r\n            newState.user = null;\r\n            localStorage.removeItem(\"token\");\r\n            break;\r\n\r\n        case AuthActionType.Update:\r\n            newState.user = action.payload;\r\n            break;\r\n    }\r\n\r\n    return newState;\r\n}\r\n\r\nexport const authStore = createStore(authReducer);"],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,OAAOC,SAAS,MAAM,YAAY;AAGlC,OAAO,MAAMC,SAAS,CAAC;EAKZC,WAAWA,CAAA,EAAG;IAAA,KAHdC,KAAK,GAAW,IAAI;IAAA,KACpBC,IAAI,GAAc,IAAI;IAGzB,IAAI,CAACD,KAAK,GAAGE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC1C,IAAG,IAAI,CAACH,KAAK,EAAE;MACX,MAAMI,UAAU,GAAGP,SAAS,CAAC,IAAI,CAACG,KAAK,CAAC;MACxC,IAAI,CAACC,IAAI,GAAIG,UAAU,CAASH,IAAI;IACxC;EACJ;AACJ;AAEA,WAAYI,cAAc,0BAAdA,cAAc;EAAdA,cAAc;EAAdA,cAAc;EAAdA,cAAc;EAAdA,cAAc;EAAA,OAAdA,cAAc;AAAA;AAY1B,OAAO,SAASC,WAAWA,CAACC,YAAY,GAAG,IAAIT,SAAS,CAAC,CAAC,EAAEU,MAAkB,EAAa;EAEvF,MAAMC,QAAQ,GAAG;IAAE,GAAGF;EAAa,CAAC;EAEpC,QAAQC,MAAM,CAACE,IAAI;IAEf,KAAKL,cAAc,CAACM,QAAQ;IAC5B,KAAKN,cAAc,CAACO,KAAK;MACrBH,QAAQ,CAACT,KAAK,GAAGQ,MAAM,CAACK,OAAO;MAC/B,MAAMT,UAAU,GAAGP,SAAS,CAACY,QAAQ,CAACT,KAAK,CAAC;MAC5CS,QAAQ,CAACR,IAAI,GAAIG,UAAU,CAASH,IAAI;MACxCC,YAAY,CAACY,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACT,KAAK,CAAC;MAC7C;IAEJ,KAAKK,cAAc,CAACU,MAAM;MACtBN,QAAQ,CAACT,KAAK,GAAG,IAAI;MACrBS,QAAQ,CAACR,IAAI,GAAG,IAAI;MACpBC,YAAY,CAACc,UAAU,CAAC,OAAO,CAAC;MAChC;IAEJ,KAAKX,cAAc,CAACY,MAAM;MACtBR,QAAQ,CAACR,IAAI,GAAGO,MAAM,CAACK,OAAO;MAC9B;EACR;EAEA,OAAOJ,QAAQ;AACnB;AAEA,OAAO,MAAMS,SAAS,GAAGtB,WAAW,CAACU,WAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}